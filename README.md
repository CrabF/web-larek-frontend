# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание проекта

### Архитектура приложения поделена на 3 слоя:

В работе используется паттерн проектирования MVP. 

Слой данных Model - хранит и обрабатывает данные, которые приходят от сервера. Основной используемый класс, который содержит все методы - AppData. У класса есть интерфейс IAppData. AppData взаимодействует с основными интерфейсами из types.

Слой отображения View - занимается рендером карточек, модалок, форм и прочих визуальных элементов. Слой представляет собой отдельные классы:  Card, Modal, Form, SuccessOrder, Basket. Слой отображает данные из Model при помощи событий слоя Presenter.

Слой Presenter - является связующим для слоя Model и View. Слой навешивает обработчики с помощью класса EventEmitter и через класс прослойку базового класса APi - LarekApi предоставляет информацию для слоя Model.


#### Основные типы данных в types/index.ts

```typescript

// Интерфейс для отдельной карточки. Все данные, которые приходят с бэка, а также опциональное свойство selected - добавлен ли товар в корзину

export interface IProductItem {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number | null;
  selected?: boolean
}

// Интерфейс для корзины или главной страницы. Данные, которые приходят с бэка.

export interface IProductList {
  total: number;
  items: IProductItem[]
}

// Интерфейс для заказа. Информация, которую заполняет пользователь и затем отправляет на сервер вместе с выбранными товарами из корзины.

export interface IOrder {
  address: string;
  email: string;
  phone: string;
  payment: 'online' | 'cash',
  total: number;
  items: string[]
}

// Интерфейс для успешного заказа

export interface IOrderSuccess {
  id: string;
  total: number
}

```

### Описание классов из слоя Model

Основной и единственный класс - AppData. Класс типизирован интерфейсом IAppData. Класс содержит все основные методы, требуемые для хранения и обработки информации, получаемой от сервера. Класс будет наследоваться в основном файле index.ts для взаимодействия с другими слоями.

В классе присутствуют такие методы:

1. **getCards** - метод требуется для отображения на Главной всех карточек товаров. Метод без аргументов. Ожидается, что метод возвращает объект типа IProductItem[], который содержит в себе массив всех карточек с информацией по каждой. Массив возвращаемых карточек модержит:

<u>id</u> карточки типа <u>string</u>
description - описание карточки типа <u>string</u>
image - изображение карточки типа <u>string</u>
title - название карточки типа <u>string</u>
category - название категориия карточки типа <u>string</u>
price - стоимость карточки товара типа number или null, так как стоимость может прийти нулевая
опциональный параметр selected? - метка, сообщающая о том, что товар был выбран и помещен в корзину типа boolean


2. **getCard** - метод требуется для отображения одной карточки. Аргументом метода выступает id карточки типа string, ожидается, что метод вернет объект типа IProductItem, содержащий всю информацию по конкретной карточке или underfined. 

3. **getTotal** - метод требуется для отображения количества товаров в корзине на Главной странице. Метод без аргументов. Ожидается, что метод вернет число всех товаров в корзине.

4. **getOrder** - метод требуется для получения информации о товарах в корзине. Метод без аргументов. Не важно, что возвращает метод.

5. **removeFromOrder** - метод требуется для удаления карточки из корзины. Аргумент метода id карточки типа string. Не важно, что возвращает метод.

6. **addToOrder** - метод требуется для добавления карточки в корзину. Аргумент метода id карточки типа string.  Не важно, что возвращает метод.

7. **setCards** - метод требуется для передачи данных от сервера общему классу Model для дальнейшего взаимодействия с полученными данными. Аргумент метода items типа IProductItem[] - массив с информацией о карточках. Не важно, что возвращает метод.


### Описание классов из слоя View

### Описание классов из слоя Presenter

Класс LarekApi - является наследником базового класса Api. Класс работает с конкретными типами данных, которые ожидаются от сервера.
Типы данных представлены как в общих типах types/index.ts так и отдельным интерфейсов ILarekAPi.

Интерфейс типизирует основные методы класса LarekApi. К основным методам относятся:

1. **getProductList** - метод требуется для получения массива карточек товаров - items и их общего количества - total. Используется на Главной странице и в корзине. Метод без аргументов. Ожидается, что метод, используя базовый метод get класса Api, вернет объект, содержащий массив карточек и их общее количество.

2. **getProductItem** - метод требуется для получения объекта конкретной карточки товара. Используется для различных вариаций отображения карточки, например в модалке слоя View. Аргументом метода является id карточки типа string. Ожидается, что метод, используя базовый метод get класса Api, вернет объект карточки.

3. **postOrder** - метод требуется для отправки на сервер заказа конкретного пользователя со всеми данными как о заказа, так и о введенной информации пользователя. Используется при отображении финального экрана об успешной покупке в слое View. Аргументом метода
является объект data типа IOrder. Ожидается, что метод, используя базовый метод post класса Api, вернет объект типа ISuccessfulOrder, содержащий id сформированного заказа и общую сумму покупки total.
  
#### Состояния приложения


# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание и UML

#### Архитектура приложения поделена на 3 слоя:

Слой данных Model - хранит и обрабатывает данные, которые приходят от сервера. Основной используемый класс, который содержит все методы - AppData. У класса есть интерфейс IAppData. AppData взаимодействует с основными интерфейсами из types.

Слой отображения View - занимается рендером карточек, модалок, форм и прочих визуальных элементов. Слой представляет собой отдельные классы:  Card, Modal, Form, SuccessOrder, Basket. Слой отображает данные из Model при помощи событий слоя Presenter.

Слой Presenter - является связующим для слоя Model и View. Слой навешивает обработчики с помощью класса EventEmitter и через класс прослойку базового класса APi - LarekApi предоставляет информацию для слоя Model.

#### Описание классов



#### Типы данных в types/index.ts

```typescript

// Интерфейс для отдельной карточки. Все данные, которые приходят с бэка, а также опциональное свойство selected - добавлен ли товар в корзину

export interface IProductItem {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number | null;
  selected?: boolean
}

// Интерфейс для корзины или главной страницы. Данные, которые приходят с бэка.

export interface IProductList {
  total: number;
  items: IProductItem[]
}

// Интерфейс для заказа. Информация, которую заполняет пользователь и затем отправляет на сервер вместе с выбранными товарами из корзины.

export interface IOrder {
  address: string;
  email: string;
  phone: string;
  payment: 'online' | 'cash',
  total: number;
  items: IProductItem[]
}

// Интерфейс для успешного заказа

export interface IOrderSuccess {
  id: string;
  total: number
}

```

### Описание классов из слоя Model

Основной и единственный класс - AppData. Класс типизирован интерфейсом IAppData.

В классе присутствуют такие методы:

1. getCards - метод требуется для отображения на Главной всех карточек товаров. Метод без аргументов. Ожидается, что метод возвращает объект типа IProductList, который содержит в себе количество всех карточек total и массив карточек items со всеми их данными.

2. getCard - метод требуется для отображения одной карточки. Аргументом метода выступает id карточки типа string, ожидается, что метод вернет объект типа IProductItem, содержащий всю информацию по конкретной карточке. 

3. getTotal - метод требуется для отображения количества товаров в корзине на Главной странице. Метод без аргументов. Ожидается, что метод вернет число.

4. getOrder - метод требуется для получения информации о товарах в корзине. Метод без аргументов. Ожидается, что метод вернет массив карточек типа IProductItem[].

5. removeFromOrder - метод требуется для удаления карточки из корзины. Аргумент метода id карточки типа string. Не важно, что возвращает метод.

6. addToOrder - метод требуется для добавления карточки в корзину. Аргумент метода id карточки типа string.  Не важно, что возвращает метод.

7. validateForm - метод требуется для валидации формы, которую заполняет пользователь. Аргумент метода форма типа HTMLElement.  Не важно, что возвращает метод.

8. successOrder - метод требуется для отправки собранного заказа и информации о пользователе на сервер. Аргумент метода order - объект заказа с информацией о выбранных товарах и о пользователе типа IOrder. Ожидается, что метод вернет объект типа IOrderSuccess с id заказа и total - общая стоимость товаров.
  


#### Состояния приложения



#### Дополнительные схемы

![данные в проекте](./src/images/collectionProject.png)

![уровни представления проекта](./src/images/levels.png)

![Основные действия](./src/images/actions.png)

